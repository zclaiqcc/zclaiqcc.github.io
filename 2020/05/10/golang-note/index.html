<!DOCTYPE html><html lang="en"><head><meta http-equiv="content-type" content="text/html; charset=utf-8"><meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" name="viewport"><meta content="yes" name="apple-mobile-web-app-capable"><meta content="black-translucent" name="apple-mobile-web-app-status-bar-style"><meta content="telephone=no" name="format-detection"><meta name="description" content="articles for tech &amp; life &amp; thoughts"><title>Golang Note | Marktub</title><link rel="stylesheet" type="text/css" href="//fonts.googleapis.com/css?family=Raleway:400,300,600"><link rel="stylesheet" type="text/css" href="/css/style.css?v=0.0.0"><link rel="stylesheet" type="text/css" href="//lib.baomitu.com/normalize/8.0.1/normalize.min.css"><link rel="stylesheet" type="text/css" href="//lib.baomitu.com/pure/1.0.1/pure-min.css"><link rel="stylesheet" type="text/css" href="//lib.baomitu.com/pure/1.0.1/grids-responsive-min.css"><link rel="stylesheet" href="//lib.baomitu.com/font-awesome/4.7.0/css/font-awesome.min.css"><script type="text/javascript" src="//lib.baomitu.com/jquery/3.4.1/jquery.min.js"></script><link rel="icon" mask="" sizes="any" href="/favicon.ico"><link rel="Shortcut Icon" type="image/x-icon" href="/favicon.ico"><link rel="apple-touch-icon" href="/apple-touch-icon.png"><link rel="apple-touch-icon-precomposed" href="/apple-touch-icon.png"><script type="text/javascript" src="//lib.baomitu.com/clipboard.js/2.0.4/clipboard.min.js"></script><script type="text/javascript" src="//lib.baomitu.com/toastr.js/2.1.4/toastr.min.js"></script><link rel="stylesheet" href="//lib.baomitu.com/toastr.js/2.1.4/toastr.min.css"><meta name="generator" content="Hexo 4.2.0"></head><body><div class="body_container"><div id="header"><div class="site-name"><h1 class="hidden">Golang Note</h1><a id="logo" href="/.">Marktub</a><p class="description">Do not go gentle into that good night.</p></div><div id="nav-menu"><a class="current" href="/."><i class="fa fa-home"> Home</i></a><a href="/archives/"><i class="fa fa-archive"> Archive</i></a><a href="/about/"><i class="fa fa-user"> About</i></a></div></div><div class="pure-g" id="layout"><div class="pure-u-1 pure-u-md-4-4"><div class="content_container"><div class="post"><h1 class="post-title">Golang Note</h1><div class="post-meta">2020-05-10<span> | </span><span class="category"><a href="/categories/notes/">notes</a></span></div><div class="clear"><div class="toc-article" id="toc"><div class="toc-title">Contents</div><ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#Go’s-Declaration-Syntax"><span class="toc-number">1.</span> <span class="toc-text">Go’s Declaration Syntax</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#C-Syntax"><span class="toc-number">1.1.</span> <span class="toc-text">C Syntax</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Go-Syntax"><span class="toc-number">1.2.</span> <span class="toc-text">Go Syntax</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#“naked”-return"><span class="toc-number">2.</span> <span class="toc-text">“naked” return</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Defer-Panic-and-Recover"><span class="toc-number">3.</span> <span class="toc-text">Defer, Panic, and Recover</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#Defer"><span class="toc-number">3.1.</span> <span class="toc-text">Defer</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#1-A-deferred-function’s-arguments-are-evaluated-when-the-defer-statement-is-evaluated"><span class="toc-number">3.1.1.</span> <span class="toc-text">1. A deferred function’s arguments are evaluated when the defer statement is evaluated</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-Deferred-function-calls-are-executed-in-LastInFirstOut-LIFO-order-after-surrounding-function-returns-which-means-the-calls-are-stored-in-a-stack-structure"><span class="toc-number">3.1.2.</span> <span class="toc-text">2. Deferred function calls are executed in LastInFirstOut(LIFO) order after surrounding function returns (which means the calls are stored in a stack structure)</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#3-Deferred-functions-may-read-and-assign-to-the-returning-function’s-named-return-values"><span class="toc-number">3.1.3.</span> <span class="toc-text">3.Deferred functions may read and assign to the returning function’s named return values</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Panic"><span class="toc-number">3.2.</span> <span class="toc-text">Panic</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Recover"><span class="toc-number">3.3.</span> <span class="toc-text">Recover</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Slice"><span class="toc-number">4.</span> <span class="toc-text">Slice</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Others"><span class="toc-number">5.</span> <span class="toc-text">Others</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Reference"><span class="toc-number">6.</span> <span class="toc-text">Reference</span></a></li></ol></div></div><div class="post-content"><p><strong><em>some notes of golang learning</em></strong></p>
<h2 id="Go’s-Declaration-Syntax"><a href="#Go’s-Declaration-Syntax" class="headerlink" title="Go’s Declaration Syntax"></a>Go’s Declaration Syntax</h2><h3 id="C-Syntax"><a href="#C-Syntax" class="headerlink" title="C Syntax"></a>C Syntax</h3><ul>
<li>with name in the middle of a declaration, it can be hard to understand the declaration.</li>
<li>the type and declaration syntax are the same, it can be difficult to parse expressions with types in the middle. (Go use <code>func</code> to declare a function, and <code>var</code> to declare a variable)</li>
</ul>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">int</span> x;</span><br><span class="line"><span class="keyword">int</span> *p;</span><br><span class="line"><span class="keyword">int</span> a[<span class="number">3</span>];</span><br><span class="line"><span class="keyword">int</span> (*fp)(<span class="keyword">int</span> (*ff)(<span class="keyword">int</span> x, <span class="keyword">int</span> y), <span class="keyword">int</span> b);</span><br><span class="line"><span class="comment">// it could be more obvious if you don't name the parameters</span></span><br><span class="line"><span class="keyword">int</span> (*fp)(<span class="keyword">int</span> (*)(<span class="keyword">int</span>, <span class="keyword">int</span>), <span class="keyword">int</span>);</span><br></pre></td></tr></table></figure>

<h3 id="Go-Syntax"><a href="#Go-Syntax" class="headerlink" title="Go Syntax"></a>Go Syntax</h3><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">x <span class="keyword">int</span></span><br><span class="line">p *<span class="keyword">int</span></span><br><span class="line">a [<span class="number">3</span>]<span class="keyword">int</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">(argc <span class="keyword">int</span>, argv []<span class="keyword">string</span>)</span> <span class="title">int</span></span></span><br><span class="line"><span class="comment">// Drop the name and it's just as clear - they're always first so there's no confusion</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">(<span class="keyword">int</span>, []<span class="keyword">string</span>)</span> <span class="title">int</span></span></span><br><span class="line"><span class="comment">// a declaration of a function variable</span></span><br><span class="line">f <span class="function"><span class="keyword">func</span><span class="params">(<span class="keyword">func</span>(<span class="keyword">int</span>,<span class="keyword">int</span>)</span> <span class="title">int</span>, <span class="title">int</span>) <span class="title">int</span></span></span><br><span class="line"><span class="comment">// a declaration of a function returns a function with a return type of int</span></span><br><span class="line">f <span class="function"><span class="keyword">func</span><span class="params">(<span class="keyword">func</span>(<span class="keyword">int</span>,<span class="keyword">int</span>)</span> <span class="title">int</span>, <span class="title">int</span>) <span class="title">func</span><span class="params">(<span class="keyword">int</span>, <span class="keyword">int</span>)</span> <span class="title">int</span></span></span><br><span class="line"><span class="comment">// an invoke closures in Go</span></span><br><span class="line">sum := <span class="function"><span class="keyword">func</span><span class="params">(a, b <span class="keyword">int</span>)</span> <span class="title">int</span></span> &#123; <span class="keyword">return</span> a+b &#125; (<span class="number">3</span>, <span class="number">4</span>)</span><br></pre></td></tr></table></figure>

<h2 id="“naked”-return"><a href="#“naked”-return" class="headerlink" title="“naked” return"></a>“naked” return</h2><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">split</span><span class="params">(sum <span class="keyword">int</span>)</span> <span class="params">(x, y <span class="keyword">int</span>)</span></span> &#123;</span><br><span class="line">	x = sum * <span class="number">4</span> / <span class="number">9</span></span><br><span class="line">	y = sum - x</span><br><span class="line">	<span class="keyword">return</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="Defer-Panic-and-Recover"><a href="#Defer-Panic-and-Recover" class="headerlink" title="Defer, Panic, and Recover"></a>Defer, Panic, and Recover</h2><h3 id="Defer"><a href="#Defer" class="headerlink" title="Defer"></a>Defer</h3><blockquote>
<p>a <code>defer</code> statement pushes a function call onto a list(stack). The list of saved calls is executed after the surrounding function returns. Defer is commonly used to simplify functions that perform various clean-up actions.</p>
</blockquote>
<blockquote>
<p>Defer statements allow us to think about closing each file right after opening it, guaranteeing that, regardless of the number of return statements in the function, the files will be closed.</p>
</blockquote>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// close files</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">CopyFile</span><span class="params">(dstName, srcName <span class="keyword">string</span>)</span> <span class="params">(written <span class="keyword">int64</span>, err error)</span></span> &#123;</span><br><span class="line">    src, err := os.Open(srcName)</span><br><span class="line">    <span class="keyword">if</span> err != <span class="literal">nil</span> &#123;</span><br><span class="line">        <span class="keyword">return</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    dst, err := os.Create(dstName)</span><br><span class="line">    <span class="keyword">if</span> err != <span class="literal">nil</span> &#123;</span><br><span class="line">        <span class="keyword">return</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    written, err = io.Copy(dst, src)</span><br><span class="line">    dst.Close()</span><br><span class="line">    src.Close()</span><br><span class="line">    <span class="keyword">return</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// release a mutex</span></span><br><span class="line">mu.Lock()</span><br><span class="line"><span class="keyword">defer</span> mu.Unlock()</span><br><span class="line"></span><br><span class="line"><span class="comment">// priting a footer</span></span><br><span class="line">printHeader()</span><br><span class="line"><span class="keyword">defer</span> printFooter()</span><br><span class="line"></span><br><span class="line"><span class="comment">// and more.</span></span><br></pre></td></tr></table></figure>

<h4 id="1-A-deferred-function’s-arguments-are-evaluated-when-the-defer-statement-is-evaluated"><a href="#1-A-deferred-function’s-arguments-are-evaluated-when-the-defer-statement-is-evaluated" class="headerlink" title="1. A deferred function’s arguments are evaluated when the defer statement is evaluated"></a>1. A deferred function’s arguments are evaluated when the defer statement is evaluated</h4><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">a</span><span class="params">()</span></span> &#123;</span><br><span class="line">    i := <span class="number">0</span></span><br><span class="line">    <span class="keyword">defer</span> fmt.Println(i)  <span class="comment">// 0</span></span><br><span class="line">    i++</span><br><span class="line">    <span class="keyword">return</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="2-Deferred-function-calls-are-executed-in-LastInFirstOut-LIFO-order-after-surrounding-function-returns-which-means-the-calls-are-stored-in-a-stack-structure"><a href="#2-Deferred-function-calls-are-executed-in-LastInFirstOut-LIFO-order-after-surrounding-function-returns-which-means-the-calls-are-stored-in-a-stack-structure" class="headerlink" title="2. Deferred function calls are executed in LastInFirstOut(LIFO) order after surrounding function returns (which means the calls are stored in a stack structure)"></a>2. Deferred function calls are executed in LastInFirstOut(LIFO) order after surrounding function returns (which means the calls are stored in a stack structure)</h4><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">b</span><span class="params">()</span></span> &#123;</span><br><span class="line">    <span class="keyword">for</span> i := <span class="number">0</span>; i &lt; <span class="number">4</span>; i++ &#123;</span><br><span class="line">        <span class="keyword">defer</span> fmt.Print(i)  <span class="comment">// 3210</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="3-Deferred-functions-may-read-and-assign-to-the-returning-function’s-named-return-values"><a href="#3-Deferred-functions-may-read-and-assign-to-the-returning-function’s-named-return-values" class="headerlink" title="3.Deferred functions may read and assign to the returning function’s named return values"></a>3.Deferred functions may read and assign to the returning function’s named return values</h4><h3 id="Panic"><a href="#Panic" class="headerlink" title="Panic"></a>Panic</h3><p><code>Panic</code> is a built-in function that stops the ordinary flow of control and begins <code>panicking</code>. When the function F calls panic, execution of F stops and deferred functions in F are executed normally, and the F returns to its caller. To the caller, F the behaveds like a call to panic. The process continues up the stack until all functions in the current goroutine have returned, at which point the program crashed. Panic can be initiated by invoking panic directly. They can also be caused by runtime errors, such as out-of-bounds array accesses.</p>
<h3 id="Recover"><a href="#Recover" class="headerlink" title="Recover"></a>Recover</h3><p><code>Recover</code> is a built-in function that regains control of a panicking goroutine. Recover is only useful inside deferred functions. During normal execution, a call to recover will return nil and have no other effect. If the current goroutine is panicking, a call to recover will capture the value given to panic and resume normal execution.</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="string">"fmt"</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">    f()</span><br><span class="line">    fmt.Println(<span class="string">"Returned normally from f."</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">f</span><span class="params">()</span></span> &#123;</span><br><span class="line">    <span class="comment">// if remove, the panic will cause a reach to the top of the goroutine's call stack</span></span><br><span class="line">    <span class="comment">// and terminating the program</span></span><br><span class="line">    <span class="keyword">defer</span> <span class="function"><span class="keyword">func</span><span class="params">()</span></span> &#123;</span><br><span class="line">        <span class="keyword">if</span> r := <span class="built_in">recover</span>(); r != <span class="literal">nil</span> &#123;</span><br><span class="line">            fmt.Println(<span class="string">"Recovered in f"</span>, r)</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;()</span><br><span class="line">    fmt.Println(<span class="string">"Calling g."</span>)</span><br><span class="line">    g(<span class="number">0</span>)</span><br><span class="line">    fmt.Println(<span class="string">"Returned normally from g."</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">g</span><span class="params">(i <span class="keyword">int</span>)</span></span> &#123;</span><br><span class="line">    <span class="keyword">if</span> i &gt; <span class="number">3</span> &#123;</span><br><span class="line">        fmt.Println(<span class="string">"Panicking!"</span>)</span><br><span class="line">        <span class="built_in">panic</span>(fmt.Sprintf(<span class="string">"%v"</span>, i))</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">defer</span> fmt.Println(<span class="string">"Defer in g"</span>, i)</span><br><span class="line">    fmt.Println(<span class="string">"Printing in g"</span>, i)</span><br><span class="line">    g(i + <span class="number">1</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// Calling g.</span></span><br><span class="line"><span class="comment">// Printing in g 0</span></span><br><span class="line"><span class="comment">// Printing in g 1</span></span><br><span class="line"><span class="comment">// Printing in g 2</span></span><br><span class="line"><span class="comment">// Printing in g 3</span></span><br><span class="line"><span class="comment">// Panicking!</span></span><br><span class="line"><span class="comment">// Defer in g 3</span></span><br><span class="line"><span class="comment">// Defer in g 2</span></span><br><span class="line"><span class="comment">// Defer in g 1</span></span><br><span class="line"><span class="comment">// Defer in g 0</span></span><br><span class="line"><span class="comment">// Recovered in f 4</span></span><br><span class="line"><span class="comment">// Returned normally from f.</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// if we remove the deferred function from f, the panic is not recovered and reaches the top of the goroutine's call stack, terminating the program. This modified program will output:</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// Calling g.</span></span><br><span class="line"><span class="comment">// Printing in g 0</span></span><br><span class="line"><span class="comment">// Printing in g 1</span></span><br><span class="line"><span class="comment">// Printing in g 2</span></span><br><span class="line"><span class="comment">// Printing in g 3</span></span><br><span class="line"><span class="comment">// Panicking!</span></span><br><span class="line"><span class="comment">// Defer in g 3</span></span><br><span class="line"><span class="comment">// Defer in g 2</span></span><br><span class="line"><span class="comment">// Defer in g 1</span></span><br><span class="line"><span class="comment">// Defer in g 0</span></span><br><span class="line"><span class="comment">// panic: 4</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// panic PC=0x2a9cd8</span></span><br><span class="line"><span class="comment">// [stack trace omitted]</span></span><br></pre></td></tr></table></figure>

<h2 id="Slice"><a href="#Slice" class="headerlink" title="Slice"></a>Slice</h2><p>To Be Done…</p>
<p><a href="https://blog.golang.org/slices-intro">https://blog.golang.org/slices-intro</a></p>
<h2 id="Others"><a href="#Others" class="headerlink" title="Others"></a>Others</h2><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br><span class="line">249</span><br><span class="line">250</span><br><span class="line">251</span><br><span class="line">252</span><br><span class="line">253</span><br><span class="line">254</span><br><span class="line">255</span><br><span class="line">256</span><br><span class="line">257</span><br><span class="line">258</span><br><span class="line">259</span><br><span class="line">260</span><br><span class="line">261</span><br><span class="line">262</span><br><span class="line">263</span><br><span class="line">264</span><br><span class="line">265</span><br><span class="line">266</span><br><span class="line">267</span><br><span class="line">268</span><br><span class="line">269</span><br><span class="line">270</span><br><span class="line">271</span><br><span class="line">272</span><br><span class="line">273</span><br><span class="line">274</span><br><span class="line">275</span><br><span class="line">276</span><br><span class="line">277</span><br><span class="line">278</span><br><span class="line">279</span><br><span class="line">280</span><br><span class="line">281</span><br><span class="line">282</span><br><span class="line">283</span><br><span class="line">284</span><br><span class="line">285</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line">	<span class="string">"fmt"</span></span><br><span class="line">	<span class="string">"math"</span></span><br><span class="line">	<span class="string">"math/rand"</span></span><br><span class="line">	<span class="string">"runtime"</span></span><br><span class="line">	<span class="string">"time"</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="keyword">type</span> Vertex <span class="keyword">struct</span> &#123;</span><br><span class="line">	X <span class="keyword">int</span></span><br><span class="line">	Y <span class="keyword">int</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">type</span> Abser <span class="keyword">interface</span> &#123;</span><br><span class="line">	Abs() <span class="keyword">float64</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// func add(x int, y int) int &#123;</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">add</span><span class="params">(x, y <span class="keyword">int</span>)</span> <span class="title">int</span></span> &#123;</span><br><span class="line">	<span class="comment">// Go Declaration Syntax</span></span><br><span class="line">	<span class="keyword">return</span> x + y</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">swap</span><span class="params">(x, y <span class="keyword">string</span>)</span> <span class="params">(<span class="keyword">string</span>, <span class="keyword">string</span>)</span></span> &#123;</span><br><span class="line">	<span class="keyword">return</span> y, x</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// named return values</span></span><br><span class="line"><span class="comment">// They can harm readability in longer functions</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">split</span><span class="params">(sum <span class="keyword">int</span>)</span> <span class="params">(x, y <span class="keyword">int</span>)</span></span> &#123;</span><br><span class="line">	x = sum * <span class="number">4</span> / <span class="number">9</span></span><br><span class="line">	y = sum - x</span><br><span class="line">	<span class="keyword">return</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">pow</span><span class="params">(x, n, lim <span class="keyword">float64</span>)</span> <span class="title">float64</span></span> &#123;</span><br><span class="line">	<span class="comment">// `if` statement with a short status to execute before the condition</span></span><br><span class="line">	<span class="comment">// the `v` variable only exists in scope until the end of `if`</span></span><br><span class="line">	<span class="keyword">if</span> v := math.Pow(x, n); v &lt; lim &#123;</span><br><span class="line">		<span class="keyword">return</span> v</span><br><span class="line">	&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">		fmt.Printf(<span class="string">"%g &gt;= %g\n"</span>, v, lim)</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="comment">// can't use v here, though</span></span><br><span class="line">	<span class="keyword">return</span> lim</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> i, j <span class="keyword">int</span> = <span class="number">1</span>, <span class="number">2</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">defer_test</span><span class="params">()</span> <span class="params">(i <span class="keyword">int</span>)</span></span> &#123;</span><br><span class="line">	<span class="keyword">defer</span> <span class="function"><span class="keyword">func</span><span class="params">()</span></span> &#123; i++ &#125;()</span><br><span class="line">	<span class="keyword">return</span> <span class="number">1</span> <span class="comment">// finally return 2</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">printSlice</span><span class="params">(s []<span class="keyword">int</span>)</span></span> &#123;</span><br><span class="line">	fmt.Printf(<span class="string">"len=%d cap=%d %v\n"</span>, <span class="built_in">len</span>(s), <span class="built_in">cap</span>(s), s)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(v Vertex)</span> <span class="title">Abs</span><span class="params">()</span> <span class="title">float64</span></span> &#123;</span><br><span class="line">	<span class="keyword">return</span> math.Sqrt(<span class="keyword">float64</span>(v.X*v.X + v.Y*v.Y))</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// pointer receiver</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(v *Vertex)</span> <span class="title">Scale</span><span class="params">(f <span class="keyword">int</span>)</span></span> &#123;</span><br><span class="line">	v.X = v.X * f</span><br><span class="line">	v.Y = v.Y * f</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">type</span> I <span class="keyword">interface</span> &#123;</span><br><span class="line">	M()</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">type</span> T <span class="keyword">struct</span> &#123;</span><br><span class="line">	S <span class="keyword">string</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(t *T)</span> <span class="title">M</span><span class="params">()</span></span> &#123;</span><br><span class="line">	<span class="keyword">if</span> t == <span class="literal">nil</span> &#123;</span><br><span class="line">		fmt.Println(<span class="string">"&lt;nil&gt;"</span>)</span><br><span class="line">		<span class="keyword">return</span></span><br><span class="line">	&#125;</span><br><span class="line">	fmt.Println(t.S)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">type</span> F <span class="keyword">float64</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(f F)</span> <span class="title">M</span><span class="params">()</span></span> &#123;</span><br><span class="line">	fmt.Println(f)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">describe</span><span class="params">(i I)</span></span> &#123;</span><br><span class="line">	fmt.Printf(<span class="string">"(%v, %T)\n"</span>, i, i)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	fmt.Println(<span class="string">"Number"</span>, rand.Intn(<span class="number">10</span>))</span><br><span class="line"></span><br><span class="line">	<span class="comment">// name is exported if begins with a capital letter</span></span><br><span class="line">	<span class="comment">// fmt.Println(math.Pi)</span></span><br><span class="line">	fmt.Println(math.Pi)</span><br><span class="line"></span><br><span class="line">	fmt.Println(add(<span class="number">1</span>, <span class="number">2</span>))</span><br><span class="line"></span><br><span class="line">	aa, bb := swap(<span class="string">"a"</span>, <span class="string">"b"</span>)</span><br><span class="line">	fmt.Println(aa, bb)</span><br><span class="line"></span><br><span class="line">	fmt.Println(split(<span class="number">17</span>))</span><br><span class="line"></span><br><span class="line">	<span class="keyword">var</span> c, python, java = <span class="literal">true</span>, <span class="literal">false</span>, <span class="string">"no!"</span></span><br><span class="line">	<span class="comment">// the `:=` short assignment statement can be used inside of a function in place of a `var` declaration with implicit type</span></span><br><span class="line">	k := <span class="number">3</span></span><br><span class="line">	fmt.Println(i, j, k, c, python, java)</span><br><span class="line"></span><br><span class="line">	<span class="comment">// zero value</span></span><br><span class="line">	<span class="keyword">var</span> i <span class="keyword">int</span>     <span class="comment">// 0</span></span><br><span class="line">	<span class="keyword">var</span> f <span class="keyword">float64</span> <span class="comment">// 0</span></span><br><span class="line">	<span class="keyword">var</span> b <span class="keyword">bool</span>    <span class="comment">// false</span></span><br><span class="line">	<span class="keyword">var</span> s <span class="keyword">string</span>  <span class="comment">// ""</span></span><br><span class="line">	<span class="keyword">var</span> ss []<span class="keyword">int</span>  <span class="comment">// nil</span></span><br><span class="line">	fmt.Printf(<span class="string">"%v %v %v %q %q\n"</span>, i, f, b, s, ss)</span><br><span class="line">	<span class="keyword">if</span> ss == <span class="literal">nil</span> &#123;</span><br><span class="line">		fmt.Println(<span class="string">"nil!"</span>)</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">const</span> Truth = <span class="literal">true</span></span><br><span class="line">	fmt.Println(<span class="string">"Go rules?"</span>, Truth)</span><br><span class="line"></span><br><span class="line">	sum := <span class="number">0</span></span><br><span class="line">	<span class="keyword">for</span> i := <span class="number">0</span>; i &lt; <span class="number">10</span>; i++ &#123;</span><br><span class="line">		sum += i</span><br><span class="line">	&#125;</span><br><span class="line">	fmt.Println(sum)</span><br><span class="line"></span><br><span class="line">	<span class="keyword">if</span> sum == <span class="number">45</span> &#123;</span><br><span class="line">		fmt.Println(<span class="string">"Yes!"</span>)</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	fmt.Print(<span class="string">"Go runs on "</span>)</span><br><span class="line">	<span class="comment">// 1. a `break` statement is provided automatically in Go</span></span><br><span class="line">	<span class="comment">// 2. Go's switch cases `need not` be `constants` | can be and can not be</span></span><br><span class="line">	<span class="comment">// 3. the values involved `need not` be `integers` | can be and can not be</span></span><br><span class="line">	<span class="keyword">switch</span> os := runtime.GOOS; os &#123;</span><br><span class="line">	<span class="keyword">case</span> <span class="string">"darwin"</span>:</span><br><span class="line">		fmt.Println(<span class="string">"OS X."</span>)</span><br><span class="line">	<span class="keyword">case</span> <span class="string">"linux"</span>:</span><br><span class="line">		fmt.Println(<span class="string">"Linux."</span>)</span><br><span class="line">	<span class="keyword">default</span>:</span><br><span class="line">		<span class="comment">// freebsd, openbsd,</span></span><br><span class="line">		<span class="comment">// plan9, windows...</span></span><br><span class="line">		fmt.Printf(<span class="string">"%s.\n"</span>, os)</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="comment">// Switch with no condition</span></span><br><span class="line">	<span class="comment">// instead of a long if-then-else chains</span></span><br><span class="line">	t := time.Now()</span><br><span class="line">	<span class="keyword">switch</span> &#123;</span><br><span class="line">	<span class="keyword">case</span> t.Hour() &lt; <span class="number">12</span>:</span><br><span class="line">		fmt.Println(<span class="string">"Good morning!"</span>)</span><br><span class="line">	<span class="keyword">case</span> t.Hour() &lt; <span class="number">17</span>:</span><br><span class="line">		fmt.Println(<span class="string">"Good afternoon."</span>)</span><br><span class="line">	<span class="keyword">default</span>:</span><br><span class="line">		fmt.Println(<span class="string">"Good evening."</span>)</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	fmt.Println(<span class="string">"counting"</span>)</span><br><span class="line">	<span class="keyword">for</span> i := <span class="number">0</span>; i &lt; <span class="number">10</span>; i++ &#123;</span><br><span class="line">		<span class="keyword">defer</span> fmt.Println(i)</span><br><span class="line">	&#125;</span><br><span class="line">	fmt.Println(<span class="string">"done"</span>)</span><br><span class="line"></span><br><span class="line">	fmt.Println(defer_test())</span><br><span class="line"></span><br><span class="line">	ii := <span class="number">42</span></span><br><span class="line">	pp := &amp;ii</span><br><span class="line">	fmt.Println(*pp)</span><br><span class="line">	*pp = <span class="number">21</span></span><br><span class="line">	fmt.Println(ii)</span><br><span class="line"></span><br><span class="line">	v := Vertex&#123;<span class="number">1</span>, <span class="number">2</span>&#125;</span><br><span class="line">	v.Y = <span class="number">4</span></span><br><span class="line">	pv := &amp;v</span><br><span class="line">	pv.X = <span class="number">5</span></span><br><span class="line">	(*pv).Y = <span class="number">6</span></span><br><span class="line">	fmt.Println(v)</span><br><span class="line"></span><br><span class="line">	<span class="keyword">var</span> (</span><br><span class="line">		v1  = Vertex&#123;<span class="number">1</span>, <span class="number">2</span>&#125;</span><br><span class="line">		v2  = Vertex&#123;X: <span class="number">1</span>&#125;</span><br><span class="line">		v3  = Vertex&#123;&#125;</span><br><span class="line">		pv4 = &amp;Vertex&#123;<span class="number">1</span>, <span class="number">2</span>&#125;</span><br><span class="line">	)</span><br><span class="line">	fmt.Println(v1, v2, v3, pv4)</span><br><span class="line"></span><br><span class="line">	<span class="keyword">var</span> a [<span class="number">2</span>]<span class="keyword">string</span></span><br><span class="line">	a[<span class="number">0</span>] = <span class="string">"hello"</span></span><br><span class="line">	a[<span class="number">1</span>] = <span class="string">"world"</span></span><br><span class="line">	fmt.Println(a)</span><br><span class="line"></span><br><span class="line">	primes := [<span class="number">6</span>]<span class="keyword">int</span>&#123;<span class="number">2</span>, <span class="number">3</span>, <span class="number">5</span>, <span class="number">7</span>, <span class="number">11</span>&#125;</span><br><span class="line">	fmt.Println(primes)</span><br><span class="line">	fmt.Println(primes[<span class="number">1</span>:<span class="number">4</span>])</span><br><span class="line"></span><br><span class="line">	<span class="comment">// slice is (like?) a pointer, which indicates the first value's address</span></span><br><span class="line">	<span class="comment">// length is the number of real elements a slice contains</span></span><br><span class="line">	<span class="comment">// capacity is the number of elements in the underlying array, counting from the first element of the slice</span></span><br><span class="line">	<span class="comment">// [:n] will not affect the capacity, but [m:] will do. Both will affect the length</span></span><br><span class="line">	ss = []<span class="keyword">int</span>&#123;<span class="number">2</span>, <span class="number">3</span>, <span class="number">5</span>, <span class="number">7</span>, <span class="number">11</span>, <span class="number">13</span>&#125;</span><br><span class="line">	printSlice(ss)</span><br><span class="line">	<span class="comment">// Slice the slice to give it zero length.</span></span><br><span class="line">	ss = ss[:<span class="number">0</span>]</span><br><span class="line">	printSlice(ss)</span><br><span class="line">	<span class="comment">// Extend its length.</span></span><br><span class="line">	ss = ss[:<span class="number">4</span>]</span><br><span class="line">	printSlice(ss)</span><br><span class="line">	<span class="comment">// Drop its first two values.</span></span><br><span class="line">	ss = ss[<span class="number">2</span>:]</span><br><span class="line">	printSlice(ss)</span><br><span class="line"></span><br><span class="line">	<span class="keyword">var</span> pow = []<span class="keyword">int</span>&#123;<span class="number">1</span>, <span class="number">2</span>, <span class="number">4</span>, <span class="number">8</span>, <span class="number">16</span>, <span class="number">32</span>, <span class="number">64</span>, <span class="number">128</span>&#125;</span><br><span class="line">	<span class="keyword">for</span> i, v := <span class="keyword">range</span> pow &#123;</span><br><span class="line">		fmt.Printf(<span class="string">"2**%d = %d\n"</span>, i, v)</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="comment">// m := make(map[string]Vertex)</span></span><br><span class="line">	<span class="comment">// m["Bell Labs"] = Vertex&#123;</span></span><br><span class="line">	<span class="comment">// 	40, -74,</span></span><br><span class="line">	<span class="comment">// &#125;</span></span><br><span class="line">	<span class="comment">// m = map[string]Vertex&#123;</span></span><br><span class="line">	<span class="comment">// 	"Bell Labs": Vertex&#123;</span></span><br><span class="line">	<span class="comment">// 		40, -74,</span></span><br><span class="line">	<span class="comment">// 	&#125;,</span></span><br><span class="line">	<span class="comment">// 	"Google": &#123;37, -122&#125;,</span></span><br><span class="line">	<span class="comment">// &#125;</span></span><br><span class="line"></span><br><span class="line">	m := <span class="built_in">make</span>(<span class="keyword">map</span>[<span class="keyword">string</span>]<span class="keyword">int</span>)</span><br><span class="line">	m[<span class="string">"Answer"</span>] = <span class="number">42</span></span><br><span class="line">	fmt.Println(<span class="string">"The value:"</span>, m[<span class="string">"Answer"</span>])</span><br><span class="line">	m[<span class="string">"Answer"</span>] = <span class="number">48</span></span><br><span class="line">	fmt.Println(<span class="string">"The value:"</span>, m[<span class="string">"Answer"</span>])</span><br><span class="line">	<span class="built_in">delete</span>(m, <span class="string">"Answer"</span>)</span><br><span class="line">	fmt.Println(<span class="string">"The value:"</span>, m[<span class="string">"Answer"</span>])</span><br><span class="line">	mv, ok := m[<span class="string">"Answer"</span>]</span><br><span class="line">	fmt.Println(<span class="string">"The value:"</span>, mv, <span class="string">"Present?"</span>, ok)</span><br><span class="line"></span><br><span class="line">	vertex := Vertex&#123;<span class="number">3</span>, <span class="number">4</span>&#125;</span><br><span class="line">	vertex.Scale(<span class="number">10</span>)</span><br><span class="line">	fmt.Println(vertex.Abs())</span><br><span class="line"></span><br><span class="line">	<span class="comment">// a interface value(`i`) can be thought of a tuple of a value and concrete type: `(value, type)`</span></span><br><span class="line">	<span class="keyword">var</span> iii I</span><br><span class="line">	<span class="comment">// describe(iii)</span></span><br><span class="line">	<span class="comment">// iii.M()  // calling a method on a nil interface value will cause runtime error</span></span><br><span class="line">	iii = &amp;T&#123;<span class="string">"Hello"</span>&#125;</span><br><span class="line">	describe(iii)</span><br><span class="line">	iii.M()</span><br><span class="line">	iii = F(math.Pi)</span><br><span class="line">	describe(iii)</span><br><span class="line">	iii.M()</span><br><span class="line">	<span class="keyword">var</span> ttt *T</span><br><span class="line">	iii = ttt</span><br><span class="line">	describe(iii)</span><br><span class="line">	iii.M() <span class="comment">// calling a method on an interface value with nil underlying values will pass a nil to the method and won't cause runtime error</span></span><br><span class="line"></span><br><span class="line">	<span class="comment">// a type assertion provides access to an interface value's underlying concrete value</span></span><br><span class="line">	<span class="keyword">var</span> iiii <span class="keyword">interface</span>&#123;&#125; = <span class="string">"hello"</span></span><br><span class="line">	ssss := iiii.(<span class="keyword">string</span>)</span><br><span class="line">	fmt.Println(ssss)</span><br><span class="line">	ssss, ok = iiii.(<span class="keyword">string</span>)</span><br><span class="line">	fmt.Println(ssss, ok)</span><br><span class="line">	ffff, ok := iiii.(<span class="keyword">float64</span>) <span class="comment">// ffff will be the zero value of float64</span></span><br><span class="line">	fmt.Println(ffff, ok)</span><br><span class="line">	<span class="comment">// ffff = iiii.(float64) // panic</span></span><br><span class="line">	<span class="comment">// fmt.Println(ffff)</span></span><br><span class="line"></span><br><span class="line">	<span class="keyword">switch</span> v := iiii.(<span class="keyword">type</span>) &#123;</span><br><span class="line">	<span class="keyword">case</span> <span class="keyword">int</span>:</span><br><span class="line">		fmt.Printf(<span class="string">"int %v\n"</span>, v)</span><br><span class="line">	<span class="keyword">case</span> <span class="keyword">string</span>:</span><br><span class="line">		fmt.Printf(<span class="string">"string %v\n"</span>, v)</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">defer</span> fmt.Println(<span class="string">"world"</span>)</span><br><span class="line">	fmt.Print(<span class="string">"hello "</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="Reference"><a href="#Reference" class="headerlink" title="Reference"></a>Reference</h2><ul>
<li><a href="https://blog.golang.org/declaration-syntax">Go’s Declaration Syntax</a></li>
<li><a href="https://tour.golang.org/flowcontrol/10">https://tour.golang.org/</a></li>
</ul>
</div><div class="tags"><a href="/tags/golang/"><i class="fa fa-tag"></i>golang</a></div><div class="post-nav"><a class="pre" href="/2020/05/10/speed-matters/">Speed matters: Why working quickly is more important than it seems</a><a class="next" href="/2019/09/16/%E5%85%B3%E4%BA%8E%E5%9B%A2%E9%98%9F%E7%AE%A1%E7%90%86%E7%9A%84%E4%B8%80%E4%BA%9B%E6%80%9D%E8%80%83%E3%80%81%E5%AD%A6%E4%B9%A0%E5%92%8C%E6%B1%87%E6%80%BB/">关于团队管理的一些思考、学习和汇总</a></div></div></div></div></div><a class="show" id="rocket" href="#top"></a><script type="text/javascript" src="/js/totop.js?v=0.0.0" async></script><script type="text/javascript" src="//lib.baomitu.com/fancybox/3.5.7/jquery.fancybox.min.js" async></script><script type="text/javascript" src="/js/fancybox.js?v=0.0.0" async></script><link rel="stylesheet" type="text/css" href="//lib.baomitu.com/fancybox/3.5.7/jquery.fancybox.min.css"><script type="text/javascript" src="/js/copycode.js" successtext="Copy Successed!"></script><link rel="stylesheet" type="text/css" href="/css/copycode.css"><script type="text/javascript" src="/js/codeblock-resizer.js?v=0.0.0"></script><script type="text/javascript" src="/js/smartresize.js?v=0.0.0"></script></div></body></html>