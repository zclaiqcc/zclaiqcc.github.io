<!DOCTYPE html><html lang="en"><head><meta http-equiv="content-type" content="text/html; charset=utf-8"><meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" name="viewport"><meta content="yes" name="apple-mobile-web-app-capable"><meta content="black-translucent" name="apple-mobile-web-app-status-bar-style"><meta content="telephone=no" name="format-detection"><meta name="description" content="articles for tech &amp; life &amp; thoughts"><title>ES6 Essentials | Marktub</title><link rel="stylesheet" type="text/css" href="//fonts.googleapis.com/css?family=Raleway:400,300,600"><link rel="stylesheet" type="text/css" href="/css/style.css?v=0.0.0"><link rel="stylesheet" type="text/css" href="//lib.baomitu.com/normalize/8.0.1/normalize.min.css"><link rel="stylesheet" type="text/css" href="//lib.baomitu.com/pure/1.0.1/pure-min.css"><link rel="stylesheet" type="text/css" href="//lib.baomitu.com/pure/1.0.1/grids-responsive-min.css"><link rel="stylesheet" href="//lib.baomitu.com/font-awesome/4.7.0/css/font-awesome.min.css"><script type="text/javascript" src="//lib.baomitu.com/jquery/3.4.1/jquery.min.js"></script><link rel="icon" mask="" sizes="any" href="/favicon.ico"><link rel="Shortcut Icon" type="image/x-icon" href="/favicon.ico"><link rel="apple-touch-icon" href="/apple-touch-icon.png"><link rel="apple-touch-icon-precomposed" href="/apple-touch-icon.png"><script type="text/javascript" src="//lib.baomitu.com/clipboard.js/2.0.4/clipboard.min.js"></script><script type="text/javascript" src="//lib.baomitu.com/toastr.js/2.1.4/toastr.min.js"></script><link rel="stylesheet" href="//lib.baomitu.com/toastr.js/2.1.4/toastr.min.css"><meta name="generator" content="Hexo 4.2.0"></head><body><div class="body_container"><div id="header"><div class="site-name"><h1 class="hidden">ES6 Essentials</h1><a id="logo" href="/.">Marktub</a><p class="description">Do not go gentle into that good night.</p></div><div id="nav-menu"><a class="current" href="/."><i class="fa fa-home"> Home</i></a><a href="/archives/"><i class="fa fa-archive"> Archive</i></a><a href="/about/"><i class="fa fa-user"> About</i></a></div></div><div class="pure-g" id="layout"><div class="pure-u-1 pure-u-md-4-4"><div class="content_container"><div class="post"><h1 class="post-title">ES6 Essentials</h1><div class="post-meta">2019-03-29<span> | </span><span class="category"><a href="/categories/notes/">notes</a></span></div><div class="clear"><div class="toc-article" id="toc"><div class="toc-title">Contents</div><ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#对象字面量-Object-Literals"><span class="toc-number">1.</span> <span class="toc-text">对象字面量 Object Literals</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#属性-值缩写-Property-Value-Shorthands"><span class="toc-number">1.1.</span> <span class="toc-text">属性-值缩写 Property Value Shorthands</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#可计算的属性名-Computed-Property-Names"><span class="toc-number">1.2.</span> <span class="toc-text">可计算的属性名 Computed Property Names</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#方法定义-Method-Definitions"><span class="toc-number">1.3.</span> <span class="toc-text">方法定义 Method Definitions</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#箭头函数-Arrow-Functions"><span class="toc-number">2.</span> <span class="toc-text">箭头函数 Arrow Functions</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#词法作用域-Lexical-Scoping"><span class="toc-number">2.1.</span> <span class="toc-text">词法作用域 Lexical Scoping</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#箭头函数的多种口味-Arrow-Function-Flavors"><span class="toc-number">2.2.</span> <span class="toc-text">箭头函数的多种口味 Arrow Function Flavors</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#赋值解构-Assignment-Destructuring"><span class="toc-number">3.</span> <span class="toc-text">赋值解构 Assignment Destructuring</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#解构对象-Destructuring-Objects"><span class="toc-number">3.1.</span> <span class="toc-text">解构对象 Destructuring Objects</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#解构数组"><span class="toc-number">3.2.</span> <span class="toc-text">解构数组</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#函数默认参数-Function-Parameter-Defaults"><span class="toc-number">4.</span> <span class="toc-text">函数默认参数 Function Parameter Defaults</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#剩余参数和展开操作符-Rest-Parameter-and-Spread-Operator"><span class="toc-number">5.</span> <span class="toc-text">剩余参数和展开操作符 Rest Parameter and Spread Operator</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#剩余参数-Rest-Parameter"><span class="toc-number">5.1.</span> <span class="toc-text">剩余参数 Rest Parameter</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#展开操作符-Spread-Operator"><span class="toc-number">5.2.</span> <span class="toc-text">展开操作符 Spread Operator</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#模板常量-Template-Literals"><span class="toc-number">6.</span> <span class="toc-text">模板常量 Template Literals</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#字符串插值-String-Interpolation"><span class="toc-number">6.1.</span> <span class="toc-text">字符串插值 String Interpolation</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#被标记的模板-Tagged-Templates"><span class="toc-number">6.2.</span> <span class="toc-text">被标记的模板 Tagged Templates</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#自定义插值-Custom-Interpolation"><span class="toc-number">6.3.</span> <span class="toc-text">自定义插值 Custom Interpolation</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#let-和-const-声明-let-and-const-Statements"><span class="toc-number">7.</span> <span class="toc-text">let 和 const 声明 let and const Statements</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#暂死区-Temporal-Dead-Zone"><span class="toc-number">7.1.</span> <span class="toc-text">暂死区 Temporal Dead Zone</span></a></li></ol></li></ol></div></div><div class="post-content"><p><strong><em>新语法并不代表一定是优化，而是提供了一种选择，每个新语法都有合适的场景，并不是旧语法一定要用新语法替换，个人认为，顺手就行，不过适当使用新特性，可以提高代码可读性和编码效率</em></strong></p>
<a id="more"></a>

<ul>
<li>refer: <a href="https://ponyfoo.com/books/practical-modern-javascript/chapters/2#es6-essentials">practical-modern-javascript/chapters/2#es6-essentials</a></li>
<li>further: <a href="http://es6-features.org/">http://es6-features.org/</a></li>
</ul>
<h2 id="对象字面量-Object-Literals"><a href="#对象字面量-Object-Literals" class="headerlink" title="对象字面量 Object Literals"></a>对象字面量 Object Literals</h2><p>鬼翻译，或者翻译成对象常量？就是正常的一个 Object</p>
<p>ES6 对 Object Literals 进行了一些改进，如下</p>
<h3 id="属性-值缩写-Property-Value-Shorthands"><a href="#属性-值缩写-Property-Value-Shorthands" class="headerlink" title="属性-值缩写 Property Value Shorthands"></a>属性-值缩写 Property Value Shorthands</h3><p>属性和值同名时可以使用缩写</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// old</span></span><br><span class="line"><span class="keyword">var</span> listeners = []</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">listen</span>(<span class="params"></span>) </span>&#123;&#125;</span><br><span class="line"><span class="keyword">var</span> events = &#123;</span><br><span class="line">  listeners: listeners,</span><br><span class="line">  listen: listen</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>


<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// new</span></span><br><span class="line"><span class="keyword">var</span> listeners = []</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">listen</span>(<span class="params"></span>) </span>&#123;&#125;</span><br><span class="line"><span class="keyword">var</span> events = &#123; listeners, listen &#125;</span><br></pre></td></tr></table></figure>

<h3 id="可计算的属性名-Computed-Property-Names"><a href="#可计算的属性名-Computed-Property-Names" class="headerlink" title="可计算的属性名 Computed Property Names"></a>可计算的属性名 Computed Property Names</h3><p>简单说就是不需要定义中间的 Object ，再对该 Object 单独赋予一些 属性-值（Property-Value）<br>尤其用于<code>函数传参</code>，函数内的 Object 可能和参数合并在一起来生成一个新的 Object</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// old</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">getEnvelope</span>(<span class="params">type, description</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">var</span> envelope = &#123;</span><br><span class="line">    data: &#123;&#125;</span><br><span class="line">  &#125;</span><br><span class="line">  envelope[type] = description</span><br><span class="line">  <span class="keyword">return</span> envelope</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>


<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// new</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">getEnvelope</span>(<span class="params">type, description</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> &#123;</span><br><span class="line">    data: &#123;&#125;,</span><br><span class="line">    [type]: description</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="方法定义-Method-Definitions"><a href="#方法定义-Method-Definitions" class="headerlink" title="方法定义 Method Definitions"></a>方法定义 Method Definitions</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// old</span></span><br><span class="line"><span class="keyword">var</span> emitter = &#123;</span><br><span class="line">  events: &#123;&#125;,</span><br><span class="line">  on: <span class="function"><span class="keyword">function</span> (<span class="params">type, fn</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (<span class="keyword">this</span>.events[type] === <span class="literal">undefined</span>) &#123;</span><br><span class="line">      <span class="keyword">this</span>.events[type] = []</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">this</span>.events[type].push(fn)</span><br><span class="line">  &#125;,</span><br><span class="line">  emit: <span class="function"><span class="keyword">function</span> (<span class="params">type, event</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (<span class="keyword">this</span>.events[type] === <span class="literal">undefined</span>) &#123;</span><br><span class="line">      <span class="keyword">return</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">this</span>.events[type].forEach(<span class="function"><span class="keyword">function</span> (<span class="params">fn</span>) </span>&#123;</span><br><span class="line">      fn(event)</span><br><span class="line">    &#125;)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>


<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// new</span></span><br><span class="line"><span class="keyword">var</span> emitter = &#123;</span><br><span class="line">  events: &#123;&#125;,</span><br><span class="line">  on(type, fn) &#123;</span><br><span class="line">    <span class="keyword">if</span> (<span class="keyword">this</span>.events[type] === <span class="literal">undefined</span>) &#123;</span><br><span class="line">      <span class="keyword">this</span>.events[type] = []</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">this</span>.events[type].push(fn)</span><br><span class="line">  &#125;,</span><br><span class="line">  emit(type, event) &#123;</span><br><span class="line">    <span class="keyword">if</span> (<span class="keyword">this</span>.events[type] === <span class="literal">undefined</span>) &#123;</span><br><span class="line">      <span class="keyword">return</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">this</span>.events[type].forEach(<span class="function"><span class="keyword">function</span> (<span class="params">fn</span>) </span>&#123;</span><br><span class="line">      fn(event)</span><br><span class="line">    &#125;)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="箭头函数-Arrow-Functions"><a href="#箭头函数-Arrow-Functions" class="headerlink" title="箭头函数 Arrow Functions"></a>箭头函数 Arrow Functions</h2><p>定义匿名函数的新方法</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// old</span></span><br><span class="line"><span class="keyword">var</span> example = <span class="function"><span class="keyword">function</span> (<span class="params">parameters</span>) </span>&#123;</span><br><span class="line">  <span class="comment">// function body</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>


<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// new</span></span><br><span class="line"><span class="keyword">var</span> example = <span class="function">(<span class="params">parameters</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="comment">// function body</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li><strong>不过需要注意，和传统的匿名函数定义方法不同的是，变量的作用域变了，详见下</strong></li>
</ul>
<h3 id="词法作用域-Lexical-Scoping"><a href="#词法作用域-Lexical-Scoping" class="headerlink" title="词法作用域 Lexical Scoping"></a>词法作用域 Lexical Scoping</h3><p>简单说，箭头函数函数体内的 <code>this</code>, <code>arguments</code>, <code>super</code> 指向被包含的作用域，也就是说 <strong>箭头函数不创建新的作用域</strong></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// old</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">puzzle</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="built_in">arguments</span>)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">puzzle(<span class="string">'a'</span>, <span class="string">'b'</span>, <span class="string">'c'</span>)(<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>)</span><br><span class="line"><span class="comment">// 这里会打印 1, 2, 3</span></span><br></pre></td></tr></table></figure>


<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// new</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">puzzle</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="function"><span class="params">()</span> =&gt;</span> <span class="built_in">console</span>.log(<span class="built_in">arguments</span>)</span><br><span class="line">&#125;</span><br><span class="line">puzzle(<span class="string">'a'</span>, <span class="string">'b'</span>, <span class="string">'c'</span>)(<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>)</span><br><span class="line"><span class="comment">// 这里会打印 a, b, c</span></span><br></pre></td></tr></table></figure>

<h3 id="箭头函数的多种口味-Arrow-Function-Flavors"><a href="#箭头函数的多种口味-Arrow-Function-Flavors" class="headerlink" title="箭头函数的多种口味 Arrow Function Flavors"></a>箭头函数的多种口味 Arrow Function Flavors</h3><p>鬼翻译，大概就是语法糖</p>
<p>只有一个参数以及简单的返回值时，可以去掉参数的小括号和函数体的大括号以及显式的 return</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// old</span></span><br><span class="line"><span class="keyword">var</span> double = <span class="function">(<span class="params">value</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">return</span> value * <span class="number">2</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// new</span></span><br><span class="line"><span class="keyword">var</span> double = <span class="function"><span class="params">value</span> =&gt;</span> value * <span class="number">2</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 这里文档没有说明，额外补充一点</span></span><br><span class="line"><span class="comment">// 当返回值是 Object 时候，需要用小括号包裹 Object，不然会发生什么？</span></span><br><span class="line"><span class="keyword">var</span> double1 = <span class="function"><span class="params">value</span> =&gt;</span> (&#123;<span class="attr">result</span>: value * <span class="number">2</span>&#125;)</span><br></pre></td></tr></table></figure>

<h2 id="赋值解构-Assignment-Destructuring"><a href="#赋值解构-Assignment-Destructuring" class="headerlink" title="赋值解构 Assignment Destructuring"></a>赋值解构 Assignment Destructuring</h2><p>从 对象Object 通过 属性Property 获取 值Value 的语法糖 </p>
<h3 id="解构对象-Destructuring-Objects"><a href="#解构对象-Destructuring-Objects" class="headerlink" title="解构对象 Destructuring Objects"></a>解构对象 Destructuring Objects</h3><p>直接上代码吧</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> palette = &#123;</span><br><span class="line">  profile: <span class="string">'intense-red'</span>,</span><br><span class="line">  name: <span class="string">'Red'</span>,</span><br><span class="line">  color: &#123;</span><br><span class="line">    code: <span class="string">`#f00`</span></span><br><span class="line">  &#125;,</span><br><span class="line">  luminosity: <span class="number">0.8</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// old</span></span><br><span class="line"><span class="keyword">var</span> profile = palette.profile</span><br><span class="line"></span><br><span class="line"><span class="comment">// new</span></span><br><span class="line"><span class="keyword">var</span> &#123; profile &#125; = palette</span><br><span class="line"><span class="keyword">var</span> &#123; profile, name &#125; = palette</span><br><span class="line"></span><br><span class="line"><span class="comment">// 别名</span></span><br><span class="line"><span class="keyword">var</span> &#123; <span class="attr">profile</span>: id &#125; = palette</span><br><span class="line"><span class="comment">// profile 并不能打印出来，因为并没有创建 profile 的实例</span></span><br><span class="line"><span class="comment">// console.log(profile) 会报错</span></span><br><span class="line"><span class="built_in">console</span>.log(id)</span><br><span class="line"><span class="comment">// 结合最开始的“属性-值缩写”，比较好理解，其实这两个是等价的：</span></span><br><span class="line"><span class="keyword">var</span> &#123; profile &#125; = palette</span><br><span class="line"><span class="keyword">var</span> &#123; <span class="attr">profile</span>: profile &#125; = palette</span><br><span class="line"></span><br><span class="line"><span class="comment">//</span></span><br><span class="line"><span class="keyword">var</span> &#123; <span class="attr">color</span>: &#123; <span class="attr">code</span>: colorCode &#125; &#125; = palette</span><br><span class="line"><span class="comment">// 同理， color，code 是不存在的</span></span><br><span class="line"><span class="comment">// console.log(color); console.log(code) 会报错</span></span><br><span class="line"><span class="built_in">console</span>.log(colorCode)</span><br><span class="line"></span><br><span class="line"><span class="comment">// 骚操作</span></span><br><span class="line"><span class="keyword">var</span> &#123; description = <span class="string">'This is a color palette'</span> &#125; = palette</span><br><span class="line"><span class="built_in">console</span>.log(description)</span><br><span class="line"><span class="keyword">var</span> &#123; <span class="attr">color</span>: &#123; density = <span class="number">320</span> &#125; &#125; = palette</span><br><span class="line"><span class="built_in">console</span>.log(density)</span><br><span class="line"><span class="keyword">var</span> &#123; <span class="attr">color</span>: paletteColor = &#123; <span class="attr">density</span>: <span class="number">320</span> &#125; &#125; = palette</span><br><span class="line"><span class="keyword">var</span> &#123; [<span class="string">'pro'</span> + <span class="string">'file'</span>]: paletteProfile &#125; = palette</span><br><span class="line"><span class="built_in">console</span>.log(paletteProfile)</span><br></pre></td></tr></table></figure>

<h3 id="解构数组"><a href="#解构数组" class="headerlink" title="解构数组"></a>解构数组</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="comment">// 直接上复杂点的语法吧，带默认值</span></span><br><span class="line"><span class="keyword">var</span> names = [<span class="string">'James'</span>, <span class="string">'L.'</span>]</span><br><span class="line"><span class="keyword">var</span> [ firstName = <span class="string">'John'</span>, , lastName = <span class="string">'Doe'</span> ] = names</span><br><span class="line"><span class="built_in">console</span>.log(lastName)</span><br><span class="line"><span class="comment">// &lt;- 'Doe'</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 不定义中间变量，实现两个变量交换</span></span><br><span class="line"><span class="comment">// python 的 a, b = b, a</span></span><br><span class="line">[left, right] = [right, left]</span><br></pre></td></tr></table></figure>

<h2 id="函数默认参数-Function-Parameter-Defaults"><a href="#函数默认参数-Function-Parameter-Defaults" class="headerlink" title="函数默认参数 Function Parameter Defaults"></a>函数默认参数 Function Parameter Defaults</h2><p>好像没什么神奇的，支持大多数上面提到的新特性，快速刷过吧</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 基础用法</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">powerOf</span>(<span class="params">base, exponent = <span class="number">2</span></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="built_in">Math</span>.pow(base, exponent)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 箭头函数</span></span><br><span class="line"><span class="keyword">var</span> double = <span class="function">(<span class="params">input = <span class="number">0</span></span>) =&gt;</span> input * <span class="number">2</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 对象解构</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">carFactory</span>(<span class="params">&#123; brand = <span class="string">'Volkswagen'</span>, make = <span class="number">1999</span> &#125;</span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(brand)</span><br><span class="line">  <span class="built_in">console</span>.log(make)</span><br><span class="line">&#125;</span><br><span class="line">carFactory(&#123; <span class="attr">make</span>: <span class="number">2000</span> &#125;)</span><br><span class="line"><span class="comment">// &lt;- 'Volkswagen'</span></span><br><span class="line"><span class="comment">// &lt;- 2000</span></span><br><span class="line"> </span><br><span class="line"><span class="comment">// 这里调用 carFactory() 会报错，因为没有给“&#123; brand = 'Volkswagen', make = 1999 &#125;”参数提供默认值，下面的优化是可以的</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">carFactory</span>(<span class="params">&#123; brand = <span class="string">'Volkswagen'</span>, make = <span class="number">1999</span> &#125; = &#123;&#125;</span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(brand)</span><br><span class="line">  <span class="built_in">console</span>.log(make)</span><br><span class="line">&#125;</span><br><span class="line">carFactory()</span><br><span class="line"><span class="comment">// &lt;- 'Volkswagen'</span></span><br><span class="line"><span class="comment">// &lt;- 1999</span></span><br></pre></td></tr></table></figure>

<h2 id="剩余参数和展开操作符-Rest-Parameter-and-Spread-Operator"><a href="#剩余参数和展开操作符-Rest-Parameter-and-Spread-Operator" class="headerlink" title="剩余参数和展开操作符 Rest Parameter and Spread Operator"></a>剩余参数和展开操作符 Rest Parameter and Spread Operator</h2><h3 id="剩余参数-Rest-Parameter"><a href="#剩余参数-Rest-Parameter" class="headerlink" title="剩余参数 Rest Parameter"></a>剩余参数 Rest Parameter</h3><p>好像没什么神奇的，就是把前面固定位置的参数排除后，剩下的参数都塞进去</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">join</span>(<span class="params">...list</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> list.join(<span class="string">', '</span>)</span><br><span class="line">&#125;</span><br><span class="line">join(<span class="string">'first'</span>, <span class="string">'second'</span>, <span class="string">'third'</span>)</span><br><span class="line"><span class="comment">// &lt;- 'first, second, third'</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 本身函数也会有 arguements 来存放所有的参数，看起来是把超出函数定义参数长度的传参放到后面的剩余参数里面去了</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">a</span>(<span class="params">b</span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(b);</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="built_in">arguments</span>);</span><br><span class="line">&#125;</span><br><span class="line">a(<span class="number">123</span>, <span class="number">456</span>)</span><br></pre></td></tr></table></figure>

<h3 id="展开操作符-Spread-Operator"><a href="#展开操作符-Spread-Operator" class="headerlink" title="展开操作符 Spread Operator"></a>展开操作符 Spread Operator</h3><p>把可迭代对象（iterable object）转成数组（比如字符串、数组）</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 连接 Concatenation</span></span><br><span class="line"><span class="comment">// ES5</span></span><br><span class="line">[<span class="number">1</span>, <span class="number">2</span>].concat(more)</span><br><span class="line"><span class="comment">// ES6</span></span><br><span class="line">[<span class="number">1</span>, <span class="number">2</span>, ...more]</span><br><span class="line"></span><br><span class="line"><span class="comment">// 合并两个列表</span></span><br><span class="line"><span class="comment">// ES5</span></span><br><span class="line">list.push.apply(list, items)</span><br><span class="line"><span class="comment">// ES6</span></span><br><span class="line">list.push(...items)</span><br><span class="line"></span><br><span class="line"><span class="comment">// 解构</span></span><br><span class="line"><span class="comment">// ES5</span></span><br><span class="line">a = list[<span class="number">0</span>], other = list.slice(<span class="number">1</span>)</span><br><span class="line"><span class="comment">// ES6</span></span><br><span class="line">[a, ...other] = list</span><br><span class="line"></span><br><span class="line"><span class="comment">// new and apply</span></span><br><span class="line"><span class="comment">// ES5</span></span><br><span class="line"><span class="keyword">new</span> (<span class="built_in">Date</span>.bind.apply(<span class="built_in">Date</span>, [<span class="literal">null</span>,<span class="number">2017</span>,<span class="number">11</span>,<span class="number">31</span>]))</span><br><span class="line"><span class="comment">// ES6</span></span><br><span class="line"><span class="keyword">new</span> <span class="built_in">Date</span>(...[<span class="number">2017</span>,<span class="number">11</span>,<span class="number">31</span>])</span><br></pre></td></tr></table></figure>

<h2 id="模板常量-Template-Literals"><a href="#模板常量-Template-Literals" class="headerlink" title="模板常量 Template Literals"></a>模板常量 Template Literals</h2><p>就是不加转义保留原格式的字符串</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> text = <span class="string">`I'm "amazed" at these opportunities!`</span></span><br><span class="line"><span class="keyword">var</span> multiline =</span><br><span class="line"><span class="string">`The first line</span></span><br><span class="line"><span class="string">A second line</span></span><br><span class="line"><span class="string">Then a third line`</span></span><br></pre></td></tr></table></figure>

<h3 id="字符串插值-String-Interpolation"><a href="#字符串插值-String-Interpolation" class="headerlink" title="字符串插值 String Interpolation"></a>字符串插值 String Interpolation</h3><p>超赞的语法，建议每种语言都有（很多的确已经支持了）</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">`The result of 2+3 equals <span class="subst">$&#123; <span class="number">2</span> + <span class="number">3</span> &#125;</span>`</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 不过谁要是真的显式嵌套使用就感觉很睿智了</span></span><br><span class="line"><span class="string">`This template literal <span class="subst">$&#123; <span class="string">`is <span class="subst">$&#123; <span class="string">'nested'</span> &#125;</span>`</span> &#125;</span>!`</span></span><br></pre></td></tr></table></figure>

<h3 id="被标记的模板-Tagged-Templates"><a href="#被标记的模板-Tagged-Templates" class="headerlink" title="被标记的模板 Tagged Templates"></a>被标记的模板 Tagged Templates</h3><figure class="highlight plain"><figcaption><span>``` 会被转义，``` String.raw ``` 用来标记模板</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">&#96;&#96;&#96;js</span><br><span class="line">String.raw&#96;&quot;\n&quot; is taken literally.</span><br><span class="line">It&#39;ll be escaped instead of interpreted.&#96;</span><br></pre></td></tr></table></figure>

<h3 id="自定义插值-Custom-Interpolation"><a href="#自定义插值-Custom-Interpolation" class="headerlink" title="自定义插值 Custom Interpolation"></a>自定义插值 Custom Interpolation</h3><p>单独抽一部分，上一部分 <code>String.raw`xxx`</code> 的语法其实是一种函数调用的语法糖</p>
<figure class="highlight plain"><figcaption><span>```</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">&#96;&#96;&#96;js</span><br><span class="line"></span><br><span class="line">&#x2F;&#x2F; 以下两两是等价的</span><br><span class="line">get&#96;http:&#x2F;&#x2F;example.com&#x2F;foo?bar&#x3D;$&#123;bar + baz&#125;&amp;quux&#x3D;$&#123;quux&#125;&#96;</span><br><span class="line">get([ &quot;http:&#x2F;&#x2F;example.com&#x2F;foo?bar&#x3D;&quot;, &quot;&amp;quux&#x3D;&quot;, &quot;&quot; ],bar + baz, quux);</span><br><span class="line"></span><br><span class="line">tag&#96;Hello, $&#123; name &#125;. I am $&#123; emotion &#125; to meet you!&#96;</span><br><span class="line">tag(</span><br><span class="line">  [&#39;Hello, &#39;, &#39;. I am &#39;, &#39; to meet you!&#39;],</span><br><span class="line">  &#39;Maurice&#39;,</span><br><span class="line">  &#39;thrilled&#39;</span><br><span class="line">)</span><br><span class="line"></span><br><span class="line">&#x2F;&#x2F; Demo</span><br><span class="line">function tag(parts, ...values) &#123;</span><br><span class="line">  return parts.reduce(</span><br><span class="line">    (all, part, index) &#x3D;&gt; all + values[index - 1] + part</span><br><span class="line">  )</span><br><span class="line">&#125;</span><br><span class="line">var name &#x3D; &#39;Maurice&#39;</span><br><span class="line">var emotion &#x3D; &#39;thrilled&#39;</span><br><span class="line">var text &#x3D; tag&#96;Hello, $&#123; name &#125;. I am $&#123; emotion &#125; to meet you!&#96;</span><br><span class="line">console.log(text)</span><br><span class="line">&#x2F;&#x2F; &lt;- &#39;Hello, Maurice. I am thrilled to meet you!&#39;</span><br></pre></td></tr></table></figure>

<h2 id="let-和-const-声明-let-and-const-Statements"><a href="#let-和-const-声明-let-and-const-Statements" class="headerlink" title="let 和 const 声明 let and const Statements"></a>let 和 const 声明 let and const Statements</h2><figure class="highlight plain"><figcaption><span>``` 和 ``` var ``` 很像，但是作用域规则不同（一个是 ``` 提升的作用域（Hoisting Scoping） ```，一个是 ``` 块作用域（Block Scoping） ```）</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">简单说， &#96;&#96;&#96; var &#96;&#96;&#96; 像 python，某一个内部作用域内定义（比如循环），后面全文都可以直接引用，&#96;&#96;&#96; let &#96;&#96;&#96; 像 Java，内部作用域可以使用外部作用域的变量，但是反之不能</span><br><span class="line">或者说，&#96;&#96;&#96; var &#96;&#96;&#96; 定义了全局的变量，&#96;&#96;&#96; let &#96;&#96;&#96; 单纯定义了局部的变量</span><br><span class="line">&#96;&#96;&#96; const &#96;&#96;&#96; 和 &#96;&#96;&#96; let &#96;&#96;&#96; 都是 &#96;&#96;&#96; 块作用域（Block Scoping）</span><br></pre></td></tr></table></figure>

<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span>(<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; <span class="number">10</span>; i ++) &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(i);</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">console</span>.log(i);	<span class="comment">// 这里可以打印出来 10</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">let</span> j = <span class="number">0</span>; j &lt; <span class="number">10</span>; j ++) &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(j);</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">console</span>.log(j);	<span class="comment">// 这里会报错</span></span><br></pre></td></tr></table></figure>

<p><strong>从编码角度来说，明确每个变量的作用域是一件很有必要的事，而且内部作用域的变量不要影响到外部作用域，所以推荐使用 let 代替 var</strong><br><strong><em>对就是在说 Python 的作用域规则不优雅hhh</em></strong></p>
<p>尽量使用 <code>let</code> 和 <code>const</code> 来替换 <code>var</code>，可变对象用 <code>let</code>，不可变用 <code>const</code></p>
<p>另外关于静态变量声明 <code>const</code> 的可变和不可变可以自行查询</p>
<h3 id="暂死区-Temporal-Dead-Zone"><a href="#暂死区-Temporal-Dead-Zone" class="headerlink" title="暂死区 Temporal Dead Zone"></a>暂死区 Temporal Dead Zone</h3><p>就是短暂的死区</p>
<p>没什么用，只是概念性地解释一下：进入某一个作用域，直到变量名被 let 定义之前，任何访问（access）该变量的操作都会报错，这中间被称为 暂死区（Temporal Dead Zone）</p>
<p><strong><em>为什么说没什么用，变量定义前就访问当然会报错啊…</em></strong>，不过有些语言是先把所有的变量都注册到全局，然后任意时候访问都是可以的</p>
</div><div class="tags"><a href="/tags/es6-js/"><i class="fa fa-tag"></i>es6, js</a></div><div class="post-nav"><a class="pre" href="/2019/03/29/CHANGELOG_SAMPLE/">Changelog Sample</a><a class="next" href="/2018/08/28/note-collection/">Note Collection</a></div></div></div></div></div><a class="show" id="rocket" href="#top"></a><script type="text/javascript" src="/js/totop.js?v=0.0.0" async></script><script type="text/javascript" src="//lib.baomitu.com/fancybox/3.5.7/jquery.fancybox.min.js" async></script><script type="text/javascript" src="/js/fancybox.js?v=0.0.0" async></script><link rel="stylesheet" type="text/css" href="//lib.baomitu.com/fancybox/3.5.7/jquery.fancybox.min.css"><script type="text/javascript" src="/js/copycode.js" successtext="Copy Successed!"></script><link rel="stylesheet" type="text/css" href="/css/copycode.css"><script type="text/javascript" src="/js/codeblock-resizer.js?v=0.0.0"></script><script type="text/javascript" src="/js/smartresize.js?v=0.0.0"></script></div></body></html>